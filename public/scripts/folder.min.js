import{g as e}from"./chunks/_commonjsHelpers.min.js";import{r as t}from"./chunks/helpers.min.js";var a,r,n={};var o,d,i={};var l=function(){if(d)return n;d=1;const e=r?a:(r=1,a=class{#e;constructor(e){if(e instanceof HTMLElement?this.#e=e:this.#e=document.querySelector(e),!this.#e)throw new Error("File details dialog element provided is undefined or null.")}showFile({id:e,name:t,createdAt:a,size:r}){if(!this.#e)return void console.error("File details dialog element is invalid !");const n=this.#e;[...n.querySelectorAll(".file-name")].forEach(e=>e.textContent=t),[...n.querySelectorAll(".file-size")].forEach(e=>e.textContent=r),[...n.querySelectorAll(".file-created")].forEach(e=>e.textContent=a),n.querySelector("a.download").href=`/files/${e}`,n.querySelector("form.delete").action=`/files/${e}?_method=DELETE`,n.showModal()}}),{parseBigInt:l}=t();!function(){if(o)return i;o=1;const e=new Image;e.src="/img/mdi--folder-move-outline.png";const t=[...document.querySelectorAll(".drag-target[draggable=true]")],a=document.querySelectorAll(".drop-target");function r(e){for(const t of a)t.classList.toggle("hidden",!e)}function n(e,t){e.classList.toggle("outline-dotted",t),e.classList.toggle("outline-hidden",!t)}t.forEach(t=>{t.addEventListener("dragstart",t=>{t.dataTransfer.setData("text/plain",t.target.dataset.id),t.dataTransfer.setData("application/action-type",t.target.classList.contains("file")?"files":"folders"),t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move",t.dataTransfer.setDragImage(e,28,22),r(!0)}),t.addEventListener("dragend",()=>{r(!1)})});for(const e of a)e.addEventListener("dragover",e=>{e.preventDefault();const t=e.dataTransfer.getData("text/plain"),a=e.target.dataset.id;e.dataTransfer.dropEffect=t!==a?"move":"none"}),e.addEventListener("dragenter",e=>{e.preventDefault();const t=e.dataTransfer.getData("text/plain"),a=e.target.dataset.id;e.dataTransfer.dropEffect=t!==a?"move":"none",n(e.target,"move"===e.dataTransfer.dropEffect)}),e.addEventListener("dragleave",e=>{e.preventDefault(),n(e.target,!1)}),e.addEventListener("drop",e=>{e.preventDefault(),n(e.target,!1);const t=e.dataTransfer.getData("text/plain"),a=e.dataTransfer.getData("application/action-type"),r=document.createElement("form");r.action=`/${a}/${t}/move`,r.method="POST";const o=document.createElement("input");o.type="hidden",o.name="newParentId",o.value=e.target.dataset.id,r.append(o),document.body.append(r),r.submit()})}();const s=l(document.querySelector("#files-data").textContent),c=new e("#file-details-dialog");return[...document.querySelectorAll("button.file")].forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.id;if(!t)throw new Error(`No id specified for this file button (${e}).`);const a=s.filter(e=>e.id===+t)[0];c.showFile(a)})}),n}(),s=e(l);export{s as default};
//# sourceMappingURL=folder.min.js.map

import{r as e,g as t}from"./chunks/helpers.min.js";var a,r,o={};var n,d,i={};var l=function(){if(d)return o;d=1;const t=r?a:(r=1,a=class{#e;constructor(e){if(e instanceof HTMLElement?this.#e=e:this.#e=document.querySelector(e),!this.#e)throw new Error("File details dialog element provided is undefined or null.")}showFile({id:e,name:t,createdAt:a,size:r}){if(!this.#e)return void console.error("File details dialog element is invalid !");const o=this.#e;[...o.querySelectorAll(".file-name")].forEach(e=>e.textContent=t),[...o.querySelectorAll(".file-size")].forEach(e=>e.textContent=r),[...o.querySelectorAll(".file-created")].forEach(e=>e.textContent=a),o.querySelector("a.download").href=`/files/${e}`,o.querySelector("form.delete").action=`/files/${e}?_method=DELETE`,o.showModal()}}),{parseBigInt:l}=e();!function(){if(n)return i;n=1;const e=new Image;e.src="/img/mdi--folder-move-outline.png";const t=[...document.querySelectorAll(".folder[draggable=true]")],a=document.querySelectorAll(".drop-target");function r(e){for(const t of a)t.classList.toggle("hidden",!e)}t.forEach(t=>{t.addEventListener("dragstart",t=>{t.dataTransfer.setData("text/plain",t.target.dataset.id),t.dataTransfer.effectAllowed="move",t.dataTransfer.dropEffect="move",t.dataTransfer.setDragImage(e,28,22),r(!0)}),t.addEventListener("dragend",()=>{r(!1)})});for(const e of a)e.addEventListener("dragover",e=>{console.log(e.dataTransfer.dropEffect),e.preventDefault();const t=e.dataTransfer.getData("text/plain"),a=e.target.dataset.id;e.dataTransfer.dropEffect=t!==a?"move":"none"}),e.addEventListener("dragenter",t=>{t.preventDefault();const a=t.dataTransfer.getData("text/plain"),r=t.target.dataset.id;t.dataTransfer.dropEffect=a!==r?"move":"none","move"===t.dataTransfer.dropEffect&&e.classList.add("outline-dashed")}),e.addEventListener("dragleave",t=>{t.preventDefault(),e.classList.remove("outline-dashed")}),e.addEventListener("drop",t=>{t.preventDefault();const a=t.dataTransfer.getData("text/plain");e.classList.remove("outline-dashed");const r=document.createElement("form");r.action=`/folders/${a}/move`,r.method="POST";const o=document.createElement("input");o.type="hidden",o.name="newParentId",o.value=t.target.dataset.id,r.append(o),document.body.append(r),r.submit()})}();const s=l(document.querySelector("#files-data").textContent),c=new t("#file-details-dialog");return[...document.querySelectorAll("button.file")].forEach(e=>{e.addEventListener("click",()=>{const t=e.dataset.id;if(!t)throw new Error(`No id specified for this file button (${e}).`);const a=s.filter(e=>e.id===+t)[0];c.showFile(a)})}),o}(),s=t(l);export{s as default};
//# sourceMappingURL=folder.min.js.map

import{g as t}from"./chunks/_commonjsHelpers.min.js";import{r as e,a}from"./chunks/toastContainer.min.js";import{r as n}from"./chunks/helpers.min.js";var r,o,d={},s={};var i=function(){if(o)return d;o=1;const t=e(),{parseBigInt:i}=n();!function(){if(r)return s;r=1;const t=new Image;t.src="/img/mdi--folder-move-outline.png";const e=[...document.querySelectorAll(".drag-target[draggable=true]")],a=document.querySelectorAll(".drop-target");function n(t){for(const e of a)e.classList.toggle("hidden",!t)}function o(t,e){t.classList.toggle("outline-dotted",e),t.classList.toggle("outline-hidden",!e)}e.forEach(e=>{e.addEventListener("dragstart",e=>{e.dataTransfer.setData("text/plain",e.target.dataset.id),e.dataTransfer.setData("application/action-type",e.target.classList.contains("file")?"files":"folders"),e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",e.dataTransfer.setDragImage(t,28,22),n(!0)}),e.addEventListener("dragend",()=>{n(!1)})});for(const t of a)t.addEventListener("dragover",t=>{t.preventDefault();const e=t.dataTransfer.getData("text/plain"),a=t.target.dataset.id;t.dataTransfer.dropEffect=e!==a?"move":"none"}),t.addEventListener("dragenter",t=>{t.preventDefault();const e=t.dataTransfer.getData("text/plain"),a=t.target.dataset.id;t.dataTransfer.dropEffect=e!==a?"move":"none",o(t.target,"move"===t.dataTransfer.dropEffect)}),t.addEventListener("dragleave",t=>{t.preventDefault(),o(t.target,!1)}),t.addEventListener("drop",t=>{t.preventDefault(),o(t.target,!1);const e=t.dataTransfer.getData("text/plain"),a=t.dataTransfer.getData("application/action-type"),n=document.createElement("form");n.action=`/${a}/${e}/move`,n.method="POST";const r=document.createElement("input");r.type="hidden",r.name="newParentId",r.value=t.target.dataset.id,n.append(r),document.body.append(n),n.submit()})}();const f=a(),c=i(document.querySelector("#files-data").textContent),l=new t("#file-details-dialog");return[...document.querySelectorAll("button.file")].forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.id;if(!e)throw new Error(`No id specified for this file button (${t}).`);const a=c.filter(t=>t.id===+e)[0];l.showFile(a)})}),new f(".toast").hide(5e3),d}(),f=t(i);export{f as default};
//# sourceMappingURL=folder.min.js.map

{"version":3,"file":"sidebar.min.js","sources":["../../js/sidebar.js?commonjs-entry","../../js/sidebar.js","../../js/newFileDialog.js"],"sourcesContent":["import { getDefaultExportFromCjs } from \"\u0000commonjsHelpers.js\";\nimport { __require as requireSidebar } from \"/home/asanchez/Work/OdinProject/React-path/Node/file-uploader/js/sidebar.js\";\nvar sidebarExports = requireSidebar();\nexport { sidebarExports as __moduleExports };\nexport default /*@__PURE__*/getDefaultExportFromCjs(sidebarExports);","const NewFileDialog = require(\"./newFileDialog\")\n\nconst newFileBtns = [...document.querySelectorAll(\".open-new-file\")]\nif (newFileBtns.length > 0) {\n    const newFileDialog = new NewFileDialog(\"#new-file-dialog\")\n\n    newFileBtns.forEach((btn) => {\n        btn.addEventListener(\"click\", () => {\n            newFileDialog.show()\n        })\n    })\n}\n\nconst newFolderBtns = [...document.querySelectorAll(\".open-new-folder\")]\nif (newFolderBtns.length > 0) {\n    const newFolderDialog = document.querySelector(\"#new-folder-dialog\")\n\n    newFolderBtns.forEach((btn) => {\n        btn.addEventListener(\"click\", () => {\n            newFolderDialog.showModal()\n        })\n    })\n}\n\nconst deleteFolderBtns = [...document.querySelectorAll(\".open-delete-folder\")]\nif (deleteFolderBtns.length > 0) {\n    const deleteFolderDialog = document.querySelector(\"#delete-folder-dialog\")\n    deleteFolderBtns.forEach((btn) => {\n        btn.addEventListener(\"click\", () => {\n            deleteFolderDialog.showModal()\n        })\n    })\n}\nconst shareFolderBtns = [...document.querySelectorAll(\".open-share-folder\")]\nif (shareFolderBtns.length > 0) {\n    const shareFolderDialog = document.querySelector(\"#share-folder-dialog\")\n    shareFolderBtns.forEach((btn) => {\n        btn.addEventListener(\"click\", () => shareFolderDialog.showModal())\n    })\n}\n","const INVALID_FILE_SIZE = \"File is too big.\"\nconst ONE_FILE_MAXIMUM = \"Multiple files upload is not allowed.\"\nconst FILE_REQUIRED = \"File required.\"\nconst MAX_FILE_SIZE = 5242880 // 5 MB\n\nclass NewFileDialog {\n    #dialog\n\n    constructor(htmlElement) {\n        if (htmlElement instanceof HTMLElement) {\n            this.#dialog = htmlElement\n        } else {\n            this.#dialog = document.querySelector(htmlElement)\n        }\n\n        if (!this.#dialog) {\n            throw new Error(\n                \"New file dialog element provided is undefined or null.\"\n            )\n        }\n\n        const checkValidity = this.#checkValidity.bind(this)\n\n        const fileInput = this.#dialog.querySelector(\"input.file-input\")\n\n        if (fileInput) {\n            fileInput.addEventListener(\"change\", () => {\n                checkValidity(fileInput)\n            })\n        }\n\n        const form = this.#dialog.querySelector(\"#new-file-form\")\n        if (form) {\n            form.addEventListener(\"submit\", (e) => {\n                checkValidity(fileInput)\n                if (!fileInput.validity.valid) {\n                    e.preventDefault()\n                }\n            })\n        }\n    }\n\n    show() {\n        this.#dialog.showModal()\n    }\n\n    #checkValidity(fileInput) {\n        const validatorHint = this.#dialog.querySelector(\".validator-hint\")\n\n        fileInput.setCustomValidity(\"\")\n        validatorHint.textContent = \"\"\n\n        const files = [...fileInput.files]\n        if (files.length <= 0) {\n            fileInput.setCustomValidity(FILE_REQUIRED)\n            validatorHint.textContent = FILE_REQUIRED\n            return\n        }\n\n        if (files.length > 1) {\n            fileInput.setCustomValidity(ONE_FILE_MAXIMUM)\n            validatorHint.textContent = ONE_FILE_MAXIMUM\n            return\n        }\n\n        const file = files[0]\n        if (file.size > MAX_FILE_SIZE) {\n            fileInput.setCustomValidity(INVALID_FILE_SIZE)\n            validatorHint.textContent = INVALID_FILE_SIZE\n            return\n        }\n    }\n}\n\nmodule.exports = NewFileDialog\n"],"names":["sidebar","getDefaultExportFromCjs","NewFileDialog","INVALID_FILE_SIZE","ONE_FILE_MAXIMUM","FILE_REQUIRED","newFileDialog","dialog","constructor","htmlElement","HTMLElement","this","document","querySelector","Error","checkValidity","bind","fileInput","addEventListener","form","e","validity","valid","preventDefault","show","showModal","validatorHint","setCustomValidity","textContent","files","length","size","require$$0","newFileBtns","querySelectorAll","forEach","btn","newFolderBtns","newFolderDialog","deleteFolderBtns","deleteFolderDialog","shareFolderBtns","shareFolderDialog","requireSidebar"],"mappings":"oEAEA,IAEAA,EAA4BC,+BCJ5B,MAAMC,+BCAN,MAAMC,EAAoB,mBACpBC,EAAmB,wCACnBC,EAAgB,wBAwEtBC,EArEA,MACIC,GAEA,WAAAC,CAAYC,GAOR,GANIA,aAAuBC,YACvBC,MAAKJ,EAAUE,EAEfE,MAAKJ,EAAUK,SAASC,cAAcJ,IAGrCE,MAAKJ,EACN,MAAM,IAAIO,MACN,0DAIR,MAAMC,EAAgBJ,MAAKI,EAAeC,KAAKL,MAEzCM,EAAYN,MAAKJ,EAAQM,cAAc,oBAEzCI,GACAA,EAAUC,iBAAiB,SAAU,KACjCH,EAAcE,KAItB,MAAME,EAAOR,MAAKJ,EAAQM,cAAc,kBACpCM,GACAA,EAAKD,iBAAiB,SAAWE,IAC7BL,EAAcE,GACTA,EAAUI,SAASC,OACpBF,EAAEG,kBAItB,CAEI,IAAAC,GACIb,MAAKJ,EAAQkB,WACrB,CAEI,EAAAV,CAAeE,GACX,MAAMS,EAAgBf,MAAKJ,EAAQM,cAAc,mBAEjDI,EAAUU,kBAAkB,IAC5BD,EAAcE,YAAc,GAE5B,MAAMC,EAAQ,IAAIZ,EAAUY,OAC5B,OAAIA,EAAMC,QAAU,GAChBb,EAAUU,kBAAkBtB,QAC5BqB,EAAcE,YAAcvB,IAI5BwB,EAAMC,OAAS,GACfb,EAAUU,kBAAkBvB,QAC5BsB,EAAcE,YAAcxB,IAInByB,EAAM,GACVE,KA/DK,SAgEVd,EAAUU,kBAAkBxB,QAC5BuB,EAAcE,YAAczB,SAFhC,CAKR,GDvEsB6B,GAEhBC,EAAc,IAAIrB,SAASsB,iBAAiB,mBAClD,GAAID,EAAYH,OAAS,EAAG,CACxB,MAAMxB,EAAgB,IAAIJ,EAAc,oBAExC+B,EAAYE,QAASC,IACjBA,EAAIlB,iBAAiB,QAAS,KAC1BZ,EAAckB,UAG1B,CAEA,MAAMa,EAAgB,IAAIzB,SAASsB,iBAAiB,qBACpD,GAAIG,EAAcP,OAAS,EAAG,CAC1B,MAAMQ,EAAkB1B,SAASC,cAAc,sBAE/CwB,EAAcF,QAASC,IACnBA,EAAIlB,iBAAiB,QAAS,KAC1BoB,EAAgBb,eAG5B,CAEA,MAAMc,EAAmB,IAAI3B,SAASsB,iBAAiB,wBACvD,GAAIK,EAAiBT,OAAS,EAAG,CAC7B,MAAMU,EAAqB5B,SAASC,cAAc,yBAClD0B,EAAiBJ,QAASC,IACtBA,EAAIlB,iBAAiB,QAAS,KAC1BsB,EAAmBf,eAG/B,CACA,MAAMgB,EAAkB,IAAI7B,SAASsB,iBAAiB,uBACtD,GAAIO,EAAgBX,OAAS,EAAG,CAC5B,MAAMY,EAAoB9B,SAASC,cAAc,wBACjD4B,EAAgBN,QAASC,IACrBA,EAAIlB,iBAAiB,QAAS,IAAMwB,EAAkBjB,cAE9D,UDrCqBkB"}
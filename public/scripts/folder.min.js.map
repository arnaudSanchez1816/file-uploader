{"version":3,"file":"folder.min.js","sources":["../../js/folder.js?commonjs-entry","../../js/folder.js","../../js/dragAndDrop.js"],"sourcesContent":["import { getDefaultExportFromCjs } from \"\u0000commonjsHelpers.js\";\nimport { __require as requireFolder } from \"/home/asanchez/Work/OdinProject/React-path/Node/file-uploader/js/folder.js\";\nvar folderExports = requireFolder();\nexport { folderExports as __moduleExports };\nexport default /*@__PURE__*/getDefaultExportFromCjs(folderExports);","const FileDetailsDialog = require(\"./fileDetailsDialog\")\nconst { parseBigInt } = require(\"./helpers\")\nrequire(\"./dragAndDrop\")\nconst ToastContainer = require(\"./toastContainer\")\n\nconst files = parseBigInt(document.querySelector(\"#files-data\").textContent)\nconst fileDetails = new FileDetailsDialog(\"#file-details-dialog\")\n\nconst filesButtons = [...document.querySelectorAll(\"button.file\")]\n\nfilesButtons.forEach((btn) => {\n    btn.addEventListener(\"click\", () => {\n        const fileId = btn.dataset.id\n        if (!fileId) {\n            throw new Error(`No id specified for this file button (${btn}).`)\n        }\n        const file = files.filter((file) => file.id === +fileId)[0]\n        fileDetails.showFile(file)\n    })\n})\n\nconst toasts = new ToastContainer(\".toast\")\ntoasts.hide(5000)\n","// Create an image and use it for the drag image\n// Use the image URL that you desire\nconst folderDragImg = new Image()\nfolderDragImg.src = \"/img/mdi--folder-move-outline.png\"\n\nconst dragTargets = [\n    ...document.querySelectorAll(\".drag-target[draggable=true]\"),\n]\n\nconst dropTargets = document.querySelectorAll(\".drop-target\")\n\nfunction toggleDragTargets(enabled) {\n    for (const target of dropTargets) {\n        target.classList.toggle(\"hidden\", !enabled)\n    }\n}\n\nfunction toggleDropTargetOutline(target, enabled) {\n    target.classList.toggle(\"outline-dotted\", enabled)\n    target.classList.toggle(\"outline-hidden\", !enabled)\n}\n\ndragTargets.forEach((folder) => {\n    folder.addEventListener(\"dragstart\", (ev) => {\n        ev.dataTransfer.setData(\"text/plain\", ev.target.dataset.id)\n        ev.dataTransfer.setData(\n            \"application/action-type\",\n            ev.target.classList.contains(\"file\") ? \"files\" : \"folders\"\n        )\n        ev.dataTransfer.effectAllowed = \"move\"\n        ev.dataTransfer.dropEffect = \"move\"\n        ev.dataTransfer.setDragImage(folderDragImg, 28, 22)\n        toggleDragTargets(true)\n    })\n\n    folder.addEventListener(\"dragend\", () => {\n        toggleDragTargets(false)\n    })\n})\n\nfor (const target of dropTargets) {\n    target.addEventListener(\"dragover\", (ev) => {\n        ev.preventDefault()\n        const targetId = ev.dataTransfer.getData(\"text/plain\")\n        const dropId = ev.target.dataset.id\n        ev.dataTransfer.dropEffect = targetId !== dropId ? \"move\" : \"none\"\n    })\n    target.addEventListener(\"dragenter\", (ev) => {\n        ev.preventDefault()\n        const targetId = ev.dataTransfer.getData(\"text/plain\")\n        const dropId = ev.target.dataset.id\n        ev.dataTransfer.dropEffect = targetId !== dropId ? \"move\" : \"none\"\n\n        toggleDropTargetOutline(\n            ev.target,\n            ev.dataTransfer.dropEffect === \"move\"\n        )\n    })\n    target.addEventListener(\"dragleave\", (ev) => {\n        ev.preventDefault()\n        toggleDropTargetOutline(ev.target, false)\n    })\n\n    target.addEventListener(\"drop\", (ev) => {\n        ev.preventDefault()\n\n        toggleDropTargetOutline(ev.target, false)\n        // Setup move form\n        const data = ev.dataTransfer.getData(\"text/plain\")\n        const actionType = ev.dataTransfer.getData(\"application/action-type\")\n        const form = document.createElement(\"form\")\n        form.action = `/${actionType}/${data}/move`\n        form.method = \"POST\"\n        const newParentInput = document.createElement(\"input\")\n        newParentInput.type = \"hidden\"\n        newParentInput.name = \"newParentId\"\n        newParentInput.value = ev.target.dataset.id\n        form.append(newParentInput)\n        document.body.append(form)\n        form.submit()\n    })\n}\n"],"names":["folderExports","FileDetailsDialog","require$$0","parseBigInt","require$$1","folderDragImg","Image","src","dragTargets","document","querySelectorAll","dropTargets","toggleDragTargets","enabled","target","classList","toggle","toggleDropTargetOutline","forEach","folder","addEventListener","ev","dataTransfer","setData","dataset","id","contains","effectAllowed","dropEffect","setDragImage","preventDefault","targetId","getData","dropId","data","actionType","form","createElement","action","method","newParentInput","type","name","value","append","body","submit","require$$2","ToastContainer","require$$3","files","querySelector","textContent","fileDetails","btn","fileId","Error","file","filter","showFile","hide","requireFolder","getDefaultExportFromCjs"],"mappings":"wKAEA,IAAIA,+BCFJ,MAAMC,EAAoBC,KACpBC,YAAEA,GAAgBC,kCCCxB,MAAMC,EAAgB,IAAIC,MAC1BD,EAAcE,IAAM,oCAEpB,MAAMC,EAAc,IACbC,SAASC,iBAAiB,iCAG3BC,EAAcF,SAASC,iBAAiB,gBAE9C,SAASE,EAAkBC,GACvB,IAAK,MAAMC,KAAUH,EACjBG,EAAOC,UAAUC,OAAO,UAAWH,EAE3C,CAEA,SAASI,EAAwBH,EAAQD,GACrCC,EAAOC,UAAUC,OAAO,iBAAkBH,GAC1CC,EAAOC,UAAUC,OAAO,kBAAmBH,EAC/C,CAEAL,EAAYU,QAASC,IACjBA,EAAOC,iBAAiB,YAAcC,IAClCA,EAAGC,aAAaC,QAAQ,aAAcF,EAAGP,OAAOU,QAAQC,IACxDJ,EAAGC,aAAaC,QACZ,0BACAF,EAAGP,OAAOC,UAAUW,SAAS,QAAU,QAAU,WAErDL,EAAGC,aAAaK,cAAgB,OAChCN,EAAGC,aAAaM,WAAa,OAC7BP,EAAGC,aAAaO,aAAaxB,EAAe,GAAI,IAChDO,GAAkB,KAGtBO,EAAOC,iBAAiB,UAAW,KAC/BR,GAAkB,OAI1B,IAAK,MAAME,KAAUH,EACjBG,EAAOM,iBAAiB,WAAaC,IACjCA,EAAGS,iBACH,MAAMC,EAAWV,EAAGC,aAAaU,QAAQ,cACnCC,EAASZ,EAAGP,OAAOU,QAAQC,GACjCJ,EAAGC,aAAaM,WAAaG,IAAaE,EAAS,OAAS,SAEhEnB,EAAOM,iBAAiB,YAAcC,IAClCA,EAAGS,iBACH,MAAMC,EAAWV,EAAGC,aAAaU,QAAQ,cACnCC,EAASZ,EAAGP,OAAOU,QAAQC,GACjCJ,EAAGC,aAAaM,WAAaG,IAAaE,EAAS,OAAS,OAE5DhB,EACII,EAAGP,OAC4B,SAA/BO,EAAGC,aAAaM,cAGxBd,EAAOM,iBAAiB,YAAcC,IAClCA,EAAGS,iBACHb,EAAwBI,EAAGP,QAAQ,KAGvCA,EAAOM,iBAAiB,OAASC,IAC7BA,EAAGS,iBAEHb,EAAwBI,EAAGP,QAAQ,GAEnC,MAAMoB,EAAOb,EAAGC,aAAaU,QAAQ,cAC/BG,EAAad,EAAGC,aAAaU,QAAQ,2BACrCI,EAAO3B,SAAS4B,cAAc,QACpCD,EAAKE,OAAS,IAAIH,KAAcD,SAChCE,EAAKG,OAAS,OACd,MAAMC,EAAiB/B,SAAS4B,cAAc,SAC9CG,EAAeC,KAAO,SACtBD,EAAeE,KAAO,cACtBF,EAAeG,MAAQtB,EAAGP,OAAOU,QAAQC,GACzCW,EAAKQ,OAAOJ,GACZ/B,SAASoC,KAAKD,OAAOR,GACrBA,EAAKU,WD7EbC,GACA,MAAMC,EAAiBC,IAEjBC,EAAQ/C,EAAYM,SAAS0C,cAAc,eAAeC,aAC1DC,EAAc,IAAIpD,EAAkB,8BAErB,IAAIQ,SAASC,iBAAiB,gBAEtCQ,QAASoC,IAClBA,EAAIlC,iBAAiB,QAAS,KAC1B,MAAMmC,EAASD,EAAI9B,QAAQC,GAC3B,IAAK8B,EACD,MAAM,IAAIC,MAAM,yCAAyCF,OAE7D,MAAMG,EAAOP,EAAMQ,OAAQD,GAASA,EAAKhC,MAAQ8B,GAAQ,GACzDF,EAAYM,SAASF,OAId,IAAIT,EAAe,UAC3BY,KAAK,ODpBQC,GAEpB1C,EAA4B2C,EAAwB9D"}
<%- include('partials/head.ejs') %>
<%- include('partials/header.ejs', { user }) %>
<main class="grow">
    <div class="drawer lg:drawer-open h-full">
        <input id="my-drawer-2" type="checkbox" class="drawer-toggle" />
        <div class="drawer-content flex flex-col p-4 gap-2">
            <!-- Page content here -->
            <label
                for="my-drawer-2"
                class="btn btn-primary drawer-button lg:hidden"
            >
                Controls
            </label>
            <%- include('partials/components/breadcrumbs.ejs', { breadcrumbs
                }) %>
            <%- include('partials/filesTable.ejs', {sharedFolder: false, files :
                folder.childFiles}) %>
        </div>
        <div class="drawer-side h-full">
            <label
                for="my-drawer-2"
                aria-label="close sidebar"
                class="drawer-overlay"
            ></label>
            <ul
                class="menu bg-base-200 text-base-content min-h-full w-60 md:w-80 p-4 lg:border-r-2 border-base-content/20"
            >
                <!-- Sidebar content here -->
                <%- include('./partials/sidebar.ejs', { folder : locals.folder, sidebarTree, breadcrumbs}) %>
            </ul>
        </div>
    </div>
    <div class="toast toast-end">
        <% locals.errors.forEach(error => { %>
        <div role="alert" class="alert alert-error">
            <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6 shrink-0 stroke-current"
                fill="none"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
                />
            </svg>
            <span><%= error.msg %></span>
        </div>
        <% }) %>
    </div>
    <script type="module" src="/scripts/folder.min.js"></script>
    <script id="files-data" type="application/json">
        <%- locals.filesJson || [] %>
    </script>
</main>
<%- include('partials/newFile.ejs', {folder : locals.folder}) %>
<%- include('partials/newFolder.ejs', {folder : locals.folder}) %>
<%- include('partials/deleteFolder.ejs', {folder : locals.folder}) %>
<%- include('partials/shareFolder.ejs', {folder : locals.folder}) %>
<%- include('partials/fileDetails.ejs') %>
<%- include('partials/footer.ejs') %>
